<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Leaderboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-custom">
        <div class="container-fluid">
          
          <ul class="nav nav-pills">
            <a class="navbar-brand" href="index.html" style="text-decoration:none">PRONTOTYPE</a>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <a onclick="toINDEX()" style="text-decoration:none"> <button class="nav-link" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Home</button></a>
              </li>
              <li class="nav-item" role="presentation">
               <a onclick="toDASHBOARD()" style="text-decoration:none"><button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">DashBoard</button></a> 
              </li>
              <li class="nav-item" role="presentation">
                <a onclick="toLEADERBOARD()" style="text-decoration:none"><button class="nav-link active" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">LeaderBoard</button></a>
              </li>
              <li class="nav-item" role="presentation">
              <a onclick="toCOMPARISON()" style="text-decoration:none"><button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Comparison</button></a>
              </li>
            </ul>
            <!-- <li class="nav-item">
              <a class="nav-link disabled">Disabled</a>
            </li> -->
          </ul>
          <div class="timeOptions">
            <span>
            <a href="login.php" style="text-decoration:none"><button type="submit" class="btn">Logout</button></a>
            </span>
    
            </div>
        </div>
      </nav>
      <div class="inline">
      <h2>All Time</h2>
      <img class="godspeed" src="godspeed2.png" alt="Godspeed" width="200px" height="170px" >
      <h2>Rankings</h2>
      </div>
    <table class="space">
      <div id="header">
        <tr>
        <th>Rank </th>
        <th>Username </th>
        <th>High score </th>
      </tr>
    </div>
   
    <div id="section">
      <tr>
        <td>1</td>
        <td id="name1"> </td>
        <td id="score1"> </td>
        <br>
      </tr>
      <tr>
        <td>2</td>
        <td id="name2"> </td>
        <td id="score2"> </td>
        <br>
      </tr>
      <tr>
        <td>3</td>
        <td id="name3"> </td>
        <td id="score3"> </td>
        <br>
      </tr>
      <tr>
        <td>4</td>
        <td id="name4"> </td>
        <td id="score4"> </td>
        <br>
      </tr>
      <tr>
        <td>5</td>
        <td id="name5"> </td>
        <td id="score5"> </td>
      </tr>
    </div>
    </table>
    <table class="space1">
      <div id="header">
        <tr>
        <th>Rank </th>
        <th>Username </th>
        <th>High score </th>
      </tr>
    </div>
   
    <div id="section">
      <tr>
        <td>6</td>
        <td id="name6"> </td>
        <td id="score6"> </td>
        <br>
      </tr>
      <tr>
        <td>7</td>
        <td id="name7"> </td>
        <td id="score7"> </td>
        <br>
      </tr>
      <tr>
        <td>8</td>
        <td id="name8"> </td>
        <td id="score8"> </td>
        <br>
      </tr>
      <tr>
        <td>9</td>
        <td id="name9"> </td>
        <td id="score9"> </td>
        <br>
      </tr>
      <tr>
        <td>10</td>
        <td id="name10"> </td>
        <td id="score10"> </td>
      </tr>
    </div>
    </table>
    <script>
      const queryString = window.location.search;

console.log(queryString);

const urlParams = new URLSearchParams(queryString);

const userName = urlParams.get('Username');

$(document).ready(function(){

$.ajax({

  url: "http://localhost/connection/ProntoType/getLeaderBoard.php?Username="+userName,

  method: "GET",

  success: function(data) {
        
      console.log(data);
      const myArr = JSON.parse(data);
      const Username = [];
      const rank =[];
      const score = [];



      for(var i in myArr) {
        console.log(myArr[i]);

        Username.push(myArr[i].USERNAME);
        rank.push(myArr[i].RANK);
        score.push(myArr[i].HS);

        }
        //console.log(avgSpeed);
        document.getElementById("name1").innerHTML = Username[0];
        document.getElementById("name2").innerHTML = Username[1];
        document.getElementById("name3").innerHTML = Username[2];
        document.getElementById("name4").innerHTML = Username[3];
        document.getElementById("name5").innerHTML = Username[4];
        document.getElementById("name6").innerHTML = Username[5];
        document.getElementById("name7").innerHTML = Username[6];
        document.getElementById("name8").innerHTML = Username[7];
        document.getElementById("name9").innerHTML = Username[8];
        document.getElementById("name10").innerHTML = Username[9];

        document.getElementById("score1").innerHTML = score[0];
        document.getElementById("score2").innerHTML = score[1];
        document.getElementById("score3").innerHTML = score[2];
        document.getElementById("score4").innerHTML = score[3];
        document.getElementById("score5").innerHTML = score[4];
        document.getElementById("score6").innerHTML = score[5];
        document.getElementById("score7").innerHTML = score[6];
        document.getElementById("score8").innerHTML = score[7];
        document.getElementById("score9").innerHTML = score[8];
        document.getElementById("score10").innerHTML = score[9];
        
      }
    })
  });

      function toINDEX(){
const queryString = window.location.search;

console.log(queryString);

const urlParams = new URLSearchParams(queryString);

const userName = urlParams.get('Username');
//alert(userName);
window.location.assign("http://localhost/connection/ProntoType/index.html?Username="+userName);

}
function toDASHBOARD(){
const queryString = window.location.search;

console.log(queryString);

const urlParams = new URLSearchParams(queryString);

const userName = urlParams.get('Username');
//alert(userName);
window.location.assign("http://localhost/connection/ProntoType/dashboard.html?Username="+userName);

}
function toLEADERBOARD(){
const queryString = window.location.search;

console.log(queryString);

const urlParams = new URLSearchParams(queryString);

const userName = urlParams.get('Username');
//alert(userName);
window.location.assign("http://localhost/connection/ProntoType/leaderboard.html?Username="+userName);

}
function toCOMPARISON(){
const queryString = window.location.search;

console.log(queryString);

const urlParams = new URLSearchParams(queryString);

const userName = urlParams.get('Username');
//alert(userName);
window.location.assign("http://localhost/connection/ProntoType/comparison.html?Username="+userName);

}
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
</body>
</html>